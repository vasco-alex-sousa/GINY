<h1>Pages#home</h1>

<!-- Displaying User Overview -->
<div class="profile-info">
  <img src="<%= @user.profile_image_url %>" alt="Profile Image">
  <p><%= @user.display_name %></p>
</div>
<div class="stats-info">
  <div class="week-info">
    <h5>Last 5</h5>
    <ul><%= @user.average(5)%> average viewers</ul>
    <ul><%= @user.max_peak_viewers(5) %> peak viewers</ul>
    <ul><%= @user.followers(5) %> new followers</ul>
    <ul><%= @user.subscribers(5) %> new subscribers</ul>
    <ul><%= @user.num_chat_msg(5) %> average chat messages</ul>
    <ul><%= @user.num_chatters(5) %> average num_chatters</ul>

  </div>
</div>

<!-- Displaying Categories -->
<div class="categories">
  <h3>Trending Categories:</h3>
  <ul>
    <% @categories.each do |category| %>
      <li><%= category.name %> (average viewers: <%= category.average_viewers.round %>)</li>
      <% if category.clips.any? %>
        <ul>
          <li>Clip with most views:</li>
          <ul>
            <li>
              <%= category.clips.order("view_count DESC").first.title %> (views: <%= category.clips.order("view_count DESC").first.view_count %>)
              <img src="<%= category.clips.order("view_count DESC").first.thumbnail_url %>" alt="Thumbnail">
            </li>
          </ul>
        </ul>
      <% end %>
    <% end %>
  </ul>
</div>

<!-- Displaying Channels -->
<div class="channels">
  <h3>Trending Channels:</h3>
  <ul>
    <% @channels.each do |channel| %>
      <li><%= channel.display_name %> (average viewers: <%= channel.average_viewers.round %>)</li>
      <% if channel.streams.any? %>
        <ul>
          <li>Clip with most views:</li>
          <ul>
            <li>
              <%= channel.clips.order("view_count DESC").first.title %> (views: <%= channel.clips.order("view_count DESC").first.view_count %>)
              <img src="<%= channel.clips.order("view_count DESC").first.thumbnail_url %>" alt="Thumbnail">
            </li>
          </ul>
        </ul>
      <% end %>
    <% end %>
  </ul>
</div>

<div style="padding-bottom: 50px;"></div>
