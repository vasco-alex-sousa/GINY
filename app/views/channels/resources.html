<!--==================== streams ====================-->
<section class="streams section" id="streams">
  <h2 class="section__title">streams</h2>
  <span class="section__subtitle">My technical level</span>

  <div class="streams__container container grid">
      <div>
          <!--=============== streams 1 ===============-->
          <div class="streams__content streams__open">
              <div class="streams__header">
                  <i class="uil uil-brackets-curly streams__icon"></i>

                  <div>
                      <h1 class="streams__title">Last 5 Streams</h1>
                      <span class="streams__subtitle">#</span>
                  </div>

                  <i class="uil uil-angle-down streams__arrow"></i>
              </div>

              <div class="streams__list grid">
                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">average viewers</h3>
                          <span class="streams__number"><%= @user.average(5)%></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__html"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">peak viewers</h3>
                          <span class="streams__number"><%= @user.max_peak_viewers(5) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__css"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">new followers</h3>
                          <span class="streams__number"><%= @user.followers(5) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__js"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">new subscribers</h3>
                          <span class="streams__number"><%= @user.subscribers(5) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__react"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                    <div class="streams__titles">
                      <h3 class="streams__name liltext">average chat messages</h3>
                      <span class="streams__number"><%= @user.num_chat_msg(5) %></span>
                    </div>
                    <div class="streams__bar">
                      <span class="streams__percentage streams__react"></span>
                    </div>
                  </div>

                    <div class="streams__data">
                    <div class="streams__titles">
                      <h3 class="streams__name liltext">average num_chatters</h3>
                      <span class="streams__number"><%= @user.num_chatters(5) %></span>
                    </div>
                    <div class="streams__bar">
                      <span class="streams__percentage streams__react"></span>
                    </div>
                  </div>


              </div>
          </div>

          <!--=============== streams 2 ===============-->
          <div class="streams__content streams__close">
              <div class="streams__header">
                  <i class="uil uil-server-network streams__icon"></i>

                  <div>
                      <h1 class="streams__title">Last 10 streams</h1>
                      <span class="streams__subtitle">#</span>
                  </div>

                  <i class="uil uil-angle-down streams__arrow"></i>
              </div>

              <div class="streams__list grid">
                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">average viewers</h3>
                          <span class="streams__number"><%= @user.average(10)%></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__html"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">peak viewers</h3>
                          <span class="streams__number"><%= @user.max_peak_viewers(10) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__css"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">new followers</h3>
                          <span class="streams__number"><%= @user.followers(10) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__js"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">new subscribers</h3>
                          <span class="streams__number"><%= @user.subscribers(10) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__react"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                    <div class="streams__titles">
                      <h3 class="streams__name liltext">average chat messages</h3>
                      <span class="streams__number"><%= @user.num_chat_msg(10) %></span>
                    </div>
                    <div class="streams__bar">
                      <span class="streams__percentage streams__react"></span>
                    </div>
                  </div>

                    <div class="streams__data">
                    <div class="streams__titles">
                      <h3 class="streams__name liltext">average num_chatters</h3>
                      <span class="streams__number"><%= @user.num_chatters(10) %></span>
                    </div>
                    <div class="streams__bar">
                      <span class="streams__percentage streams__react"></span>
                    </div>
                  </div>
             </div>
      </div>

      <div>
          <!--=============== streams 3 ===============-->
          <div class="streams__content streams__close">
              <div class="streams__header">
                  <i class="uil uil-swatchbook streams__icon"></i>

                  <div>
                      <h1 class="streams__title">Last 30 streams</h1>
                      <span class="streams__subtitle">#</span>
                  </div>

                  <i class="uil uil-angle-down streams__arrow"></i>
              </div>

             <div class="streams__list grid">
                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">average viewers</h3>
                          <span class="streams__number"><%= @user.average(30)%></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__html"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">peak viewers</h3>
                          <span class="streams__number"><%= @user.max_peak_viewers(30) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__css"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">new followers</h3>
                          <span class="streams__number"><%= @user.followers(30) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__js"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                      <div class="streams__titles">
                          <h3 class="streams__name liltext">new subscribers</h3>
                          <span class="streams__number"><%= @user.subscribers(30) %></span>
                      </div>
                      <div class="streams__bar">
                          <span class="streams__percentage streams__react"></span>
                      </div>
                  </div>

                  <div class="streams__data">
                    <div class="streams__titles">
                      <h3 class="streams__name liltext">average chat messages</h3>
                      <span class="streams__number"><%= @user.num_chat_msg(30) %></span>
                    </div>
                    <div class="streams__bar">
                      <span class="streams__percentage streams__react"></span>
                    </div>
                  </div>

                    <div class="streams__data">
                    <div class="streams__titles">
                      <h3 class="streams__name liltext">average num_chatters</h3>
                      <span class="streams__number"><%= @user.num_chatters(30) %></span>
                    </div>
                    <div class="streams__bar">
                      <span class="streams__percentage streams__react"></span>
                    </div>
                  </div>


              </div>
          </div>
      </div>
  </div>
</section>




<div class="profile-info">
  <div class="user-info">
          <h2><%= @user.display_name %></h2>
          <% if @user.total_followers >= 1000 && @user.total_followers < 1000000 %>
            <p><%= (@user.total_followers / 1000.0).round(1) %>k followers</p>
          <% elsif @user.total_followers >= 1000000 %>
            <p><%= (@user.total_followers / 1000000.0).round(1) %>M followers</p>
          <% else %>
            <p><%= @user.total_followers %> followers</p>
          <% end %>
         <div class="follow-button">
  <a href="https://www.twitch.tv/<%= @user.display_name %>/follow"
     target="_blank"
     class="text-decoration-none category-btn"
  >
    <i class="fab fa-twitch"></i> Follow <%= @user.display_name %> on Twitch
  </a>
</div>

          <p><%= @user.description %></p>
          <% if @user.streams.any? %>
            <% if @top_categories.any? %>
              <ul class="stream-categories">
                <% @top_categories.each do |category_id| %>
                  <% category_name = Category.find(category_id).name %>
                  <li><%= category_name %></li>
                <% end %>
              </ul>
            <% end %>
          <% end %>
        </div>
</div>





<div class="card-container">
  <div class="cards-container">
    <% @user_clips.each do |clip| %>
      <div class="card-trip">
        <img src="<%= clip.thumbnail_url %>" alt="Clip thumbnail">
        <div class="card-trip-infos">
          <h2 ><%= clip.title %></h2>
          <p> <%= clip.view_count %> <strong>Views</strong></p>
          <p> <%= clip.clip_date.strftime("%B %d, %Y") %></p>
        </div>
      </div>
    <% end %>
  </div>
</div>
</div>
