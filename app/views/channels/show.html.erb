<h1><%= @user.display_name %></h1>

<div class="profile-info">
  <img class="avatar-large" src="<%= @user.profile_image_url %>" alt="Profile Image">
  <div class="user-info">
          <h2><%= @user.display_name %></h2>
          <% if @user.total_followers >= 1000 && @user.total_followers < 1000000 %>
            <p><%= (@user.total_followers / 1000.0).round(1) %>k followers</p>
          <% elsif @user.total_followers >= 1000000 %>
            <p><%= (@user.total_followers / 1000000.0).round(1) %>M followers</p>
          <% else %>
            <p><%= @user.total_followers %> followers</p>
          <% end %>
         <div class="follow-button">
  <a href="https://www.twitch.tv/<%= @user.display_name %>/follow"
     target="_blank"
     class="text-decoration-none category-btn"
  >
    <i class="fab fa-twitch"></i> Follow <%= @user.display_name %> on Twitch
  </a>
</div>

          <p><%= @user.description %></p>
          <% if @user.streams.any? %>
            <% if @top_categories.any? %>
              <ul class="stream-categories">
                <% @top_categories.each do |category_id| %>
                  <% category_name = Category.find(category_id).name %>
                  <li><%= category_name %></li>
                <% end %>
              </ul>
            <% end %>
          <% end %>
        </div>
</div>

<section class="skills section" id="skills">
  <h2 class="section__title">Stream archive</h2>
  <span class="section__subtitle">Stream data</span>

  <div class="skills__container container grid">
      <div>
          <!--=============== SKILLS 1 ===============-->
          <div class="skills__content skills__open">
              <div class="skills__header">
                  <i class="uil uil-brackets-curly skills__icon"></i>

                  <div>
                      <h1 class="skills__title">Last 5 Streams</h1>
                      <span class="skills__subtitle">Check out your performance</span>
                  </div>

                  <i class="uil uil-angle-down skills__arrow"></i>
              </div>

              <div class="skills__list grid">
                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">average viewers</h3>
                          <span class="skills__number"><%= @user.average(5)%></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__html"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">peak viewers</h3>
                          <span class="skills__number"><%= @user.max_peak_viewers(5) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__css"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">new followers</h3>
                          <span class="skills__number"><%= @user.followers(5) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__js"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">new subscribers</h3>
                          <span class="skills__number"><%= @user.subscribers(5) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__react"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                    <div class="skills__titles">
                      <h3 class="skills__name">average chat messages</h3>
                      <span class="skills__number"><%= @user.num_chat_msg(5) %></span>
                    </div>
                    <div class="skills__bar">
                      <span class="skills__percentage skills__react"></span>
                    </div>
                  </div>

                    <div class="skills__data">
                    <div class="skills__titles">
                      <h3 class="skills__name">average num_chatters</h3>
                      <span class="skills__number"><%= @user.num_chatters(5) %></span>
                    </div>
                    <div class="skills__bar">
                      <span class="skills__percentage skills__react"></span>
                    </div>
                  </div>


              </div>
          </div>

          <!--=============== SKILLS 2 ===============-->
          <div class="skills__content skills__close">
              <div class="skills__header">
                  <i class="uil uil-server-network skills__icon"></i>

                  <div>
                      <h1 class="skills__title">Last 10 streams</h1>
                      <span class="skills__subtitle">Check out your performance</span>
                  </div>

                  <i class="uil uil-angle-down skills__arrow"></i>
              </div>

              <div class="skills__list grid">
                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">average viewers</h3>
                          <span class="skills__number"><%= @user.average(10)%></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__html"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">peak viewers</h3>
                          <span class="skills__number"><%= @user.max_peak_viewers(10) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__css"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">new followers</h3>
                          <span class="skills__number"><%= @user.followers(10) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__js"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">new subscribers</h3>
                          <span class="skills__number"><%= @user.subscribers(10) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__react"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                    <div class="skills__titles">
                      <h3 class="skills__name">average chat messages</h3>
                      <span class="skills__number"><%= @user.num_chat_msg(10) %></span>
                    </div>
                    <div class="skills__bar">
                      <span class="skills__percentage skills__react"></span>
                    </div>
                  </div>

                    <div class="skills__data">
                    <div class="skills__titles">
                      <h3 class="skills__name">average num_chatters</h3>
                      <span class="skills__number"><%= @user.num_chatters(10) %></span>
                    </div>
                    <div class="skills__bar">
                      <span class="skills__percentage skills__react"></span>
                    </div>
                  </div>
             </div>
      </div>

      <div>
          <!--=============== SKILLS 3 ===============-->
          <div class="skills__content skills__close">
              <div class="skills__header">
                  <i class="uil uil-swatchbook skills__icon"></i>

                  <div>
                      <h1 class="skills__title">Last 30 streams</h1>
                      <span class="skills__subtitle">Check out your performance</span>
                  </div>

                  <i class="uil uil-angle-down skills__arrow"></i>
              </div>

             <div class="skills__list grid">
                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">average viewers</h3>
                          <span class="skills__number"><%= @user.average(30)%></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__html"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">peak viewers</h3>
                          <span class="skills__number"><%= @user.max_peak_viewers(30) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__css"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">new followers</h3>
                          <span class="skills__number"><%= @user.followers(30) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__js"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                      <div class="skills__titles">
                          <h3 class="skills__name">new subscribers</h3>
                          <span class="skills__number"><%= @user.subscribers(30) %></span>
                      </div>
                      <div class="skills__bar">
                          <span class="skills__percentage skills__react"></span>
                      </div>
                  </div>

                  <div class="skills__data">
                    <div class="skills__titles">
                      <h3 class="skills__name">average chat messages</h3>
                      <span class="skills__number"><%= @user.num_chat_msg(30) %></span>
                    </div>
                    <div class="skills__bar">
                      <span class="skills__percentage skills__react"></span>
                    </div>
                  </div>

                    <div class="skills__data">
                    <div class="skills__titles">
                      <h3 class="skills__name">average num_chatters</h3>
                      <span class="skills__number"><%= @user.num_chatters(30) %></span>
                    </div>
                    <div class="skills__bar">
                      <span class="skills__percentage skills__react"></span>
                    </div>
                  </div>


              </div>
          </div>
      </div>
  </div>
</section>






<!--<div class="streams-info">
  <h2>Streams</h2>
  <div class="num-streams-selector">
    <%= link_to "Last 5 streams", channels_path(num_streams: 5) %>
    <%= link_to "Last 10 streams", channels_path(num_streams: 10) %>
    <%= link_to "Last 30 streams", channels_path(num_streams: 30) %>
  </div>
  <div class="stats-info">
    <div class="week-info">
      <h5>Last 5 Streams</h5>
      <ul><%= @user.average(5)%> average viewers</ul>
      <ul><%= @user.max_peak_viewers(5) %> peak viewers</ul>
      <ul><%= @user.followers(5) %> new followers</ul>
      <ul><%= @user.subscribers(5) %> new subscribers</ul>
      <ul><%= @user.num_chat_msg(5) %> average chat messages</ul>
      <ul><%= @user.num_chatters(5) %> average num_chatters</ul>
    </div>
    <div class="week-info">
      <h5>Last 10 Streams</h5>
      <ul><%= @user.average(10)%> average viewers</ul>
      <ul><%= @user.max_peak_viewers(10) %> peak viewers</ul>
      <ul><%= @user.followers(10) %> new followers</ul>
      <ul><%= @user.subscribers(10) %> new subscribers</ul>
      <ul><%= @user.num_chat_msg(10) %> average chat messages</ul>
      <ul><%= @user.num_chatters(10) %> average num_chatters</ul>
    </div>
    <div class="week-info">
      <h5>Last 30 Streams</h5>
      <ul><%= @user.average(30)%> average viewers</ul>
      <ul><%= @user.max_peak_viewers(30) %> peak viewers</ul>
      <ul><%= @user.followers(30) %> new followers</ul>
      <ul><%= @user.subscribers(30) %> new subscribers</ul>
      <ul><%= @user.num_chat_msg(30) %> average chat messages</ul>
      <ul><%= @user.num_chatters(30) %> average num_chatters</ul>
    </div>
  </div>
</div>-->


<div class="card-container">
  <div class="cards-container">
    <% @user_clips.each do |clip| %>
      <div class="card-trip">
        <img src="<%= clip.thumbnail_url %>" alt="Clip thumbnail">
        <div class="card-trip-infos">
          <h2 ><%= clip.title %></h2>
          <p> <%= clip.view_count %> <strong>Views</strong></p>
          <p> <%= clip.clip_date.strftime("%B %d, %Y") %></p>
        </div>
      </div>
    <% end %>
  </div>

</div>

<div style="padding-bottom: 65px;"></div>
